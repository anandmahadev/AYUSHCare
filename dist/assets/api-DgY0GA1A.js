const i={users:[{id:"u1",email:"admin@ayushcare.com",password:"password123",fullName:"System Admin",role:"ADMIN"},{id:"u2",email:"ayurveda@demo.com",password:"password123",fullName:"Dr. Sharma",role:"PRACTITIONER"},{id:"u3",email:"patient@demo.com",password:"password123",fullName:"Rajesh Kumar",role:"PATIENT"}],appointments:[{id:"a1",practitioner:{user:{fullName:"Dr. Sharma"},id:"p1"},patient:{user:{fullName:"Rajesh Kumar"},id:"pat1"},scheduledAt:new Date(new Date().setHours(10,0)).toISOString(),status:"CONFIRMED",type:"VIDEO",meetingLink:"https://meet.google.com/abc-defg-hij"},{id:"a2",practitioner:{user:{fullName:"Dr. Sharma"},id:"p1"},patient:{user:{fullName:"Priya Singh"},id:"pat2"},scheduledAt:new Date(new Date().setHours(14,30)).toISOString(),status:"PENDING",type:"IN_PERSON"},{id:"a3",practitioner:{user:{fullName:"Dr. Sharma"},id:"p1"},patient:{user:{fullName:"Amit Patel"},id:"pat3"},scheduledAt:new Date(new Date().setDate(new Date().getDate()+1)).toISOString(),status:"CONFIRMED",type:"VIDEO"}]};class c{static async handleRequest(t,s,a){if(console.log(`[MockAPI] ${s} ${t}`,a),await new Promise(r=>setTimeout(r,600)),t==="/auth/login"){const r=i.users.find(e=>e.email===a.email&&e.password===a.password);if(r)return{status:"success",token:"mock-jwt-token-123",data:{user:{...r,password:void 0}}};throw new Error("Incorrect email or password")}if(t==="/auth/register"){if(i.users.find(o=>o.email===a.email))throw new Error("Email already in use");const e={id:`u${i.users.length+1}`,...a};return i.users.push(e),{status:"success",data:{user:e}}}if(t==="/appointments"&&s==="GET")return{status:"success",results:i.appointments.length,data:{appointments:i.appointments}};if(t==="/practitioners"&&s==="GET"){const r=i.users.filter(e=>e.role==="PRACTITIONER").map(e=>({id:`p_${e.id}`,user:e,specialities:["AYURVEDA"]}));return{status:"success",results:r.length,data:{practitioners:r}}}return{message:"Mock endpoint not implemented yet"}}}window.USE_MOCK_API=!0;window.MockApiHandler=c;console.log("âœ… AYUSHCare Mock Backend System initialized");const l="AIzaSyCeY6U02cFOEfnZLq27v9wFZ5quQvH22pU";class n{static get token(){return localStorage.getItem("token")}static get headers(){const t={"Content-Type":"application/json"};return this.token&&(t.Authorization=`Bearer ${this.token}`),t}static async request(t,s={}){if(window.USE_MOCK_API&&window.MockApiHandler)try{const e=s.method||"GET",o=s.body?JSON.parse(s.body):null;return await window.MockApiHandler.handleRequest(t,e,o)}catch(e){throw console.error("Mock API Error:",e),e}const a=`${l}${t}`,r={headers:this.headers,...s};try{const e=await fetch(a,r);if(e.status===401)return this.logout(),null;const o=await e.json();if(!e.ok)throw new Error(o.message||"Something went wrong");return o}catch(e){throw console.error("API Error:",e),e}}static async get(t){return this.request(t,{method:"GET"})}static async post(t,s){return this.request(t,{method:"POST",body:JSON.stringify(s)})}static async patch(t,s){return this.request(t,{method:"PATCH",body:JSON.stringify(s)})}static logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="login.html"}static isAuthenticated(){return!!this.token}}function d(){n.isAuthenticated()||(window.location.href="login.html")}window.Api=n;window.requireAuth=d;
