import"./main-C4_tj5mD.js";import"./api-DgY0GA1A.js";document.addEventListener("DOMContentLoaded",()=>{const u=document.getElementById("authForm"),o=document.getElementById("toggleAuth"),s=document.getElementById("pageTitle"),e=document.getElementById("submitBtn"),a=document.getElementById("nameGroup"),d=document.getElementById("roleGroup"),r=document.getElementById("footerText"),l=document.getElementById("errorMessage");let n=!1;o.addEventListener("click",()=>{n=!n,n?(s.textContent="Create Account",e.textContent="Register",a.style.display="block",d.style.display="block",r.textContent="Already have an account?",o.textContent="Sign In",document.getElementById("fullName").required=!0):(s.textContent="Sign In",e.textContent="Sign In",a.style.display="none",d.style.display="none",r.textContent="Don't have an account?",o.textContent="Create account",document.getElementById("fullName").required=!1)}),u.addEventListener("submit",async m=>{m.preventDefault(),l.style.display="none",e.disabled=!0,e.textContent="Processing...";const c=document.getElementById("email").value,i=document.getElementById("password").value;try{let t;if(n){const g=document.getElementById("fullName").value,y=document.getElementById("role").value;t=await Api.post("/auth/register",{email:c,password:i,fullName:g,role:y}),alert("Registration successful! Please sign in."),window.location.reload();return}else t=await Api.post("/auth/login",{email:c,password:i}),localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.data.user)),window.location.href="dashboard.html"}catch(t){l.textContent=t.message,l.style.display="block",e.disabled=!1,e.textContent=n?"Register":"Sign In"}})});
